/*
Copyright (C) 2004-2012, Parrot Foundation.

*/

#include <stdio.h>
#ifdef _WIN32
#  define snprintf _snprintf
#endif

int
main(int argc, char* argv[])
{
    char buf[10];
    int n;

#ifdef BROKEN_SPRINTF_UPLUS
#  ifdef HAS_SNPRINTF
    snprintf(buf, 10, "%+u", 123);
#  else
    sprintf(buf, "%+u", 123);
#  endif
    if (*buf == '+')
        puts("not ok");
    else if (*buf == '1')
        puts("ok");
    else
        puts("unknown");
#else
    n = snprintf(buf, 2, "%s", "01234");
    if (n == -1)
        puts("old snprintf");
    else if (n == 5)
        puts("C99 snprintf");
    else
        printf("broken snprintf: n = %d\n", n);
#endif
    return 0;
}

/*
 * Local variables:
 *   c-file-style: "parrot"
 * End:
 * vim: expandtab shiftwidth=4 cinoptions='\:2=2' :
 */
